<html>
<head>
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="/css/bootstrap.css">
    <!-- Optional theme -->
    <link rel="stylesheet" href="/css/bootstrap-theme.css">

    <!-- Latest compiled and minified JavaScript -->
    <script src="/js/jquery-2.1.1.js"></script>
    <script src="/js/bootstrap.js"></script>

    <style>
        .highlight {
            padding: 9px 14px;
            margin-bottom: 14px;
            background-color: #f7f7f9;
            border: 1px solid #e1e1e8;
            border-radius: 4px;
        }
    </style>

</head>
<body>
<div class="jumbotron">
    <h1>Madeira/Stub</h1>

    <p>测试框架</p>
</div>
<!--<form method="post" action='http://121.40.139.128:8899/order.do'>-->
<!-- <form method="post" action='http://121.40.139.128:9998/order.do'> -->
<div class="container">
    <ul class="nav nav-tabs">
        <li role="presentation"><a href="/unit/start">Ordering</a></li>
        <li role="presentation" class="active"><a href="/unit/query">Querying</a></li>
    </ul>
    <div class="row">
        <div class="col-sm-6 form-horizontal">

            <div class="row">

                <label class="col-sm-2 control-label">Function</label>

                <div class="col-sm-10 form-group">
                    <select class="form-control" id='form_type'>
                        <option value="prod">产品定义</option>
                    </select>
                </div>

                <label class="col-sm-2 control-label">Target</label>

                <div class="col-sm-10 form-group">
                    <select class="form-control" id='url'>
                        <option value="http://localhost:8899">Localhost(8899)</option>
                        <option value="http://localhost:8901">Localhost(8901)</option>
                        <option value="http://42.121.254.121:8899">Billy(Fee)</option>
                        <option value="http://42.121.252.237">Chandler(Data)</option>
                    </select>
                </div>

                <label class="col-sm-2 control-label">UserId</label>

                <div class="col-sm-10 form-group">
                    <select class="form-control" id='user_id'>
                        <option value="100001">100001</option>
                        <option value="101103">101103 月亮传奇</option>
                    </select>
                </div>

                <div class="col-sm-12">
                    <a id='btn_act' class="btn btn-danger btn-block">ACTION!</a>
                </div>
            </div>
        </div>

        <div class="col-sm-6">
            <div class="col-sm-12">
                <label>Result</label>
                <pre id="message" class="highlight"></pre>
            </div>
        </div>
    </div>
</div>

<script>

    $(function () {

        $('#btn_act').click(function () {

            var q = {
                'type': $('#form_type').val(),
                'user_id': $('#user_id').val(),
                'url': $('#url').val()
            };

            var str = JSON.stringify(q);

            var url = 'http://localhost:8900/unit/query';

            $.post(url, str).done(function (data) {
                alert(data);

                var ret = JSON.parse(data);
                $("#message").text(ret.ret);
            }).fail(function (e) {
                alert('fail');
            });
        });
    })
</script>
</body>
</html>